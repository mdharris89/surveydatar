% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dataprocessingfunctions.R
\name{collapse_wide_question}
\alias{collapse_wide_question}
\title{Collapse Wide-Format Survey Questions}
\usage{
collapse_wide_question(
  temp_dat,
  vars_to_collapse,
  collapse_on,
  var_name_sep = "_",
  var_label_sep = " - ",
  interactive_mode = FALSE
)
}
\arguments{
\item{temp_dat}{A survey_data object containing the data and metadata to be collapsed.}

\item{vars_to_collapse}{Character vector of variable names to collapse. These should
follow a consistent naming pattern with the collapse values embedded in the names.}

\item{collapse_on}{Character string specifying the variable name that contains the
values used to determine which collapsed variable to use for each respondent.}

\item{var_name_sep}{Character string specifying the separator used in variable names.
Default is "_".}

\item{var_label_sep}{Character string specifying the separator used in variable labels.
Default is " - ".}

\item{interactive_mode}{Logical indicating whether to show a preview and ask for
confirmation before collapsing. Default is FALSE.}
}
\value{
A new survey_data object with collapsed variables. The original wide-format
variables are removed and replaced with the collapsed versions. Variable labels
are updated to remove the category-specific portions.
}
\description{
Transforms wide-format survey questions into a single variable by collapsing multiple
variables based on a reference variable. This is useful when you have the same question
asked across different categories (e.g., satisfaction_male, satisfaction_female) and
want to create a single variable using a category variable to determine which value
each respondent should receive.
}
\examples{
\dontrun{
# Create sample data with wide-format questions
dat <- data.frame(
  id = 1:5,
  gender = c("male", "female", "male", "female", "other"),
  satisfaction_male = c(5, NA, 4, NA, NA),
  satisfaction_female = c(NA, 3, NA, 5, NA),
  satisfaction_other = c(NA, NA, NA, NA, 4)
)
survey_obj <- create_survey_data(dat)

# Collapse the satisfaction variables based on gender
collapsed <- collapse_wide_question(
  survey_obj,
  vars_to_collapse = c("satisfaction_male", "satisfaction_female", "satisfaction_other"),
  collapse_on = "gender"
)
}
}
