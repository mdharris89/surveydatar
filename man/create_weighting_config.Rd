% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/weighting_config.R
\name{create_weighting_config}
\alias{create_weighting_config}
\title{Create weighting configuration object}
\usage{
create_weighting_config(
  strata_col = "Country",
  id_col = "respondent_id",
  demo_var_mapping = NULL,
  legacy_mappings = list(QCOUNTRY = "Country"),
  constraint_patterns = list(sum = "^Sum:|^Total:", occasion = "^Occ:", demo = "^Demo:")
)
}
\arguments{
\item{strata_col}{Name of stratification column (default "Country").
This column is used for country/market/region-specific constraints
and tolerance calculations in percentage_point mode.}

\item{id_col}{Name of respondent ID column (default "respondent_id").
Auto-generated if missing in data.}

\item{demo_var_mapping}{Named list mapping friendly names to actual column names.
Example: list(Gender = "SC1", Age = "SC2merged").
Creates alias columns for easier constraint specification.}

\item{legacy_mappings}{Named list of automatic column renamings for backward compatibility.
Default: list(QCOUNTRY = "Country") converts QCOUNTRY to Country automatically.
Set to NULL to disable legacy mappings.}

\item{constraint_patterns}{Named list of regex patterns for identifying constraint types.
Used for diagnostic reporting and constraint categorization.
Default: list(sum = "^Sum:|^Total:", occasion = "^Occ:", demo = "^Demo:")}
}
\value{
A weighting_config object (list with class "weighting_config")
}
\description{
Creates a configuration object for the weighting system that defines
column names, constraint type patterns, and backward compatibility mappings.
This allows the weighting functions to work with any dataset structure
without hardcoding specific column names.
}
\examples{
\dontrun{
# Default configuration (works with "Country" column)
config <- create_weighting_config()

# Custom configuration for data using "market" instead of "Country"
config <- create_weighting_config(
  strata_col = "market",
  id_col = "resp_id"
)

# With demographic variable mapping
config <- create_weighting_config(
  demo_var_mapping = list(
    Gender = "SC1",
    Age = "SC2merged",
    Region = "QREGION"
  )
)

# Disable legacy mappings
config <- create_weighting_config(legacy_mappings = NULL)

# Use in weighting
result <- run_unified_weighting(
  raw_data = my_data,
  stages = list(...),
  config = config
)
}
}
